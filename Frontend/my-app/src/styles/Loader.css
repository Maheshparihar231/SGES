/* From Uiverse.io by adamgiebl, adapted to site theme and accessibility */

:root {
  --loader-accent: #fc5185; /* fallback accent glow */
  --loader-border: #333;
  --loader-dash: #444;
  --loader-size-md: 150px;
  --loader-size-sm: 80px;
  --loader-size-lg: 220px;
}

.loader-wrap { display:inline-flex; align-items:center; justify-content:center; }

.loader {
  --loader-size: var(--loader-size-md);
  position: relative;
  width: var(--loader-size);
  height: var(--loader-size);
  background: transparent;
  border-radius: 50%;
  box-shadow: 25px 25px 75px rgba(0, 0, 0, 0.55);
  border: 1px solid var(--loader-border);
  display: flex;
  align-items: center;
  justify-content: center;
  overflow: hidden;
}

.loader::before {
  content: '';
  position: absolute;
  inset: calc(var(--loader-size) * 0.13);
  background: transparent;
  border: 1px dashed var(--loader-dash);
  border-radius: 50%;
  box-shadow: inset -5px -5px 25px rgba(0, 0, 0, 0.25),
      inset 5px 5px 35px rgba(0, 0, 0, 0.25);
}

.loader::after {
  content: '';
  position: absolute;
  width: calc(var(--loader-size) * 0.33);
  height: calc(var(--loader-size) * 0.33);
  border-radius: 50%;
  border: 1px dashed var(--loader-dash);
  box-shadow: inset -5px -5px 25px rgba(0, 0, 0, 0.25),
      inset 5px 5px 35px rgba(0, 0, 0, 0.25);
}

.loader span {
  position: absolute;
  top: 50%;
  left: 50%;
  width: 50%;
  height: 100%;
  background: transparent;
  transform-origin: top left;
  animation: radar81 2s linear infinite;
  border-top: 1px dashed rgba(255,255,255,0.95);
}

.loader span::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: linear-gradient(45deg, var(--loader-accent), var(--loader-accent-2, #ff6b81));
  transform-origin: top left;
  transform: rotate(-55deg);
  filter: blur(30px) drop-shadow(20px 20px 20px var(--loader-accent));
}

/* size modifiers */
.loader--sm { --loader-size: var(--loader-size-sm); }
.loader--md { --loader-size: var(--loader-size-md); }
.loader--lg { --loader-size: var(--loader-size-lg); }

/* Respect reduced motion preferences */
@media (prefers-reduced-motion: reduce) {
  .loader span { animation: none; }
  .loader span::before { filter: none; }
}

/* SVG spinner fallback styles */
.loader-svg {
  width: var(--loader-size);
  height: var(--loader-size);
  display: block;
}
.loader-svg .loader-ring {
  stroke: linear-gradient(45deg, var(--loader-accent), var(--loader-accent-2, #ff6b81));
  stroke: rgba(255,255,255,0.12);
  stroke-linecap: round;
  stroke-dasharray: 125;
  stroke-dashoffset: 0;
  transform-origin: 50% 50%;
  animation: rotateRing 1.2s linear infinite;
}

@keyframes rotateRing {
  0% { transform: rotate(0deg); stroke-dashoffset: 0; }
  100% { transform: rotate(360deg); stroke-dashoffset: -125; }
}

@media (prefers-reduced-motion: reduce) {
  .loader-svg .loader-ring { animation: none; }
}

/* visible label */
.loader-label { margin-top: 0.6rem; color: rgba(255,255,255,0.85); font-size: 0.95rem; text-align:center; }

/* Screen-reader only helper */
.sr-only {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border: 0;
}

@keyframes radar81 {
  0% { transform: rotate(0deg); }
  100% { transform: rotate(360deg); }
}
